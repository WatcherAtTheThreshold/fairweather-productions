<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <!-- Standard Favicons -->
<link rel="icon" href="images/quill_favicon.ico" type="image/x-icon" />
<link rel="icon" href="images/quill_32x32.png" sizes="32x32" type="image/png" />
<link rel="icon" href="images/quill_64x64.png" sizes="64x64" type="image/png" />
<link rel="icon" href="images/quill_128x128.png" sizes="128x128" type="image/png" />

<!-- Apple Touch Icon -->
<link rel="apple-touch-icon" href="images/quill_apple_touch_180x180.png" />

  
  <title>Sigil Oracle ‚Äî Sketchy Ponderings</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;700&family=Source+Sans+Pro:wght@300;400&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      font-family: 'Source Sans Pro', sans-serif;
      background-color: #0a0a0a;
      color: #f0f0f0;
      overflow-x: hidden;
      position: relative;
    }

    .background {
      background: rgba(20, 20, 30, 0.8);
      opacity: 1;
      position: fixed;
      width: 100%;
      height: 100%;
      z-index: -2;
    }

    .mist-overlay {
      background: radial-gradient(circle, rgba(138, 43, 226, 0.02) 1px, transparent 1px);
      background-size: 20px 20px;
      opacity: 0.4;
      position: fixed;
      width: 100%;
      height: 250vh;
      z-index: -1;
      animation: mistScroll 120s linear infinite;
    }

    @keyframes mistScroll {
      from { background-position: 0 0; }
      to { background-position: -500px 500px; }
    }

    .header {
      text-align: center;
      padding: 3rem 2rem 2rem;
      backdrop-filter: blur(5px);
      background: rgba(0, 0, 0, 0.2);
      margin-bottom: 2rem;
      position: relative;
      z-index: 2;
    }

    h1 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 3.5rem;
      font-weight: 500;
      color: #f2f2f2;
      text-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
      margin-bottom: 0.5rem;
    }

    .subtitle {
      font-size: 1.2rem;
      color: rgba(255, 255, 255, 0.8);
      font-weight: 300;
      font-style: italic;
    }

    .nav {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 1rem;
      max-width: 700px;
      margin: 0 auto 3rem;
      padding: 0 2rem;
      position: relative;
      z-index: 2;
    }

    .mobile-menu-button {
      display: none;
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(10px);
      color: #fff;
      border: 1px solid rgba(255, 255, 255, 0.2);
      padding: 1rem;
      border-radius: 8px;
      font-size: 1.2rem;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 0 auto 1rem;
      width: fit-content;
    }

    .mobile-menu-button:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 255, 255, 0.4);
    }

    .nav-links {
      display: contents;
    }

    .nav a {
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(10px);
      color: #fff;
      text-decoration: none;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 400;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.2);
      text-align: center;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    .nav a::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transition: left 0.5s;
    }

    .nav a:hover::before {
      left: 100%;
    }

    .nav a:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 255, 255, 0.4);
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3), 0 0 20px rgba(138, 43, 226, 0.2);
    }

    .nav a.creative {
      border-color: rgba(138, 43, 226, 0.4);
    }

    .nav a.creative:hover {
      border-color: rgba(138, 43, 226, 0.8);
      background: rgba(138, 43, 226, 0.1);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3), 0 0 25px rgba(138, 43, 226, 0.4);
    }

    .cruxfade-link {
      font-size: 1.3rem;
      color: rgba(255, 255, 255, 0.7) !important;
      text-decoration: none;
      transition: all 0.3s ease;
      padding: 0.5rem 1rem !important;
      border: 1px solid rgba(255, 255, 255, 0.3) !important;
      border-radius: 8px;
      backdrop-filter: blur(5px);
      background: transparent !important;
      box-shadow: none !important;
      transform: none !important;
      height: 60px !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
    }

    .cruxfade-link:hover {
      color: #fff !important;
      border-color: rgba(255, 255, 255, 0.6) !important;
      background: rgba(255, 255, 255, 0.1) !important;
      transform: translateY(-2px) !important;
      box-shadow: none !important;
    }

    .oracle-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
      text-align: center;
      position: relative;
      z-index: 2;
    }

    .oracle-intro {
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 15px;
      padding: 2rem;
      margin-bottom: 3rem;
      position: relative;
      overflow: hidden;
    }

    .oracle-intro::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, transparent, rgba(138, 43, 226, 0.6), transparent);
    }

    .oracle-intro p {
      color: rgba(255, 255, 255, 0.8);
      line-height: 1.6;
      font-size: 1.1rem;
      margin-bottom: 1rem;
    }

    .oracle-intro p:last-child {
      margin-bottom: 0;
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.6);
      font-style: italic;
    }

    .oracle-interface {
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 15px;
      padding: 3rem 2rem;
      margin-bottom: 2rem;
      position: relative;
      overflow: hidden;
    }

    .oracle-interface::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, transparent, rgba(138, 43, 226, 0.6), transparent);
    }

    .question-input {
      width: 100%;
      max-width: 500px;
      margin: 0 auto 2rem;
      padding: 1rem 1.5rem;
      font-size: 1.1rem;
      font-family: 'Georgia', serif;
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      background: rgba(0, 0, 0, 0.3);
      color: #f0f0f0;
      text-align: center;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .question-input:focus {
      outline: none;
      border-color: rgba(138, 43, 226, 0.6);
      box-shadow: 0 0 20px rgba(138, 43, 226, 0.3);
    }

    .question-input::placeholder {
      color: rgba(255, 255, 255, 0.5);
      font-style: italic;
    }

    .pulse-glow {
      animation: pulse 3.5s ease-in-out infinite;
    }

    @keyframes pulse {
      0%   { box-shadow: 0 0 20px rgba(138, 43, 226, 0.3); }
      50%  { box-shadow: 0 0 40px rgba(138, 43, 226, 0.6); }
      100% { box-shadow: 0 0 20px rgba(138, 43, 226, 0.3); }
    }

    .reveal-button {
      background: rgba(138, 43, 226, 0.2);
      color: #fff;
      text-decoration: none;
      padding: 1rem 2rem;
      border-radius: 8px;
      border: 2px solid rgba(138, 43, 226, 0.4);
      transition: all 0.3s ease;
      font-weight: 400;
      font-size: 1.1rem;
      cursor: pointer;
      backdrop-filter: blur(10px);
    }

    .reveal-button:hover {
      background: rgba(138, 43, 226, 0.4);
      border-color: rgba(138, 43, 226, 0.6);
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(138, 43, 226, 0.3);
    }

    .reveal-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .sigil-display {
      min-height: 400px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 2rem;
    }

    .sigil {
      max-width: 300px;
      width: 100%;
      height: auto;
      opacity: 0;
      transition: all 1s ease;
      filter: drop-shadow(0 0 20px rgba(138, 43, 226, 0.3));
      border-radius: 8px;
    }

    .sigil.visible {
      opacity: 1;
      transform: scale(1);
    }

    .phrase {
      font-family: 'Georgia', serif;
      font-style: italic;
      color: rgba(255, 255, 255, 0.9);
      font-size: 1.3rem;
      max-width: 600px;
      margin: 0 auto;
      opacity: 0;
      transition: all 1s ease;
      line-height: 1.6;
      text-align: center;
    }

    .phrase.visible {
      opacity: 1;
    }

    .phrase.loading {
      color: rgba(138, 43, 226, 0.8);
      animation: breathe 2s ease-in-out infinite;
    }

    @keyframes breathe {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }

    .secret-whisper {
      position: fixed;
      bottom: 20px;
      left: 20px;
      font-size: 0.7rem;
      color: rgba(255, 255, 255, 0.3);
      font-style: italic;
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
      z-index: 10;
    }

    .secret-whisper.show {
      opacity: 1;
    }

    .back-to-top {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(10px);
      color: #fff;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 1.2rem;
      cursor: pointer;
      z-index: 10;
      display: none;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .back-to-top:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.4);
      transform: translateY(-2px);
    }

    .back-to-top.show {
      display: flex;
    }

    footer {
      text-align: center;
      padding: 3rem 2rem;
      font-size: 0.9rem;
      color: rgba(255,255,255,0.5);
      font-family: 'Source Sans Pro', sans-serif;
      backdrop-filter: blur(5px);
      background: rgba(0, 0, 0, 0.2);
      margin-top: 3rem;
      position: relative;
      z-index: 2;
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 2.5rem;
      }
      
      .mobile-menu-button {
        display: block;
      }

      .nav {
        grid-template-columns: 1fr;
        gap: 0.8rem;
        padding: 0 2rem;
        max-height: 60vh;
        overflow-y: auto;
        max-width: 400px;
      }

      .nav-links {
        display: none;
        grid-template-columns: 1fr;
        gap: 0.8rem;
      }

      .nav-links.open {
        display: grid;
        animation: slideDown 0.3s ease;
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      .nav a {
        padding: 0.8rem 1rem;
        font-size: 0.9rem;
      }

      .oracle-intro,
      .oracle-interface {
        padding: 1.5rem;
      }

      .header {
        padding: 2rem 1rem 1rem;
      }

      .oracle-container {
        padding: 1rem;
      }

      .sigil {
        max-width: 250px;
      }
    }

    @media (max-width: 480px) {
      .nav {
        padding: 0 1rem;
      }

      .mobile-menu-button {
        margin: 0 auto 1rem;
      }

      .phrase {
        font-size: 1.1rem;
      }
    }
  </style>
</head>
<body>
  <div class="background"></div>
  <div class="mist-overlay"></div>

  <div class="header">
    <h1>Sigil Oracle</h1>
    <p class="subtitle">Ancient wisdom through digital divination</p>
  </div>

  <div class="nav">
    <button class="mobile-menu-button" id="mobileMenuButton">‚ò∞ Menu</button>
    <div class="nav-links" id="navLinks">
      <a href="./index.html">Home</a>
      <a href="./gallery.html">Gallery</a>
      <a href="./games.html" class="creative">Games</a>
      <a href="./music.html" class="creative">Music</a>
      <a href="./stories.html">Stories</a>
      <a href="./about.html">About</a>
      <a href="./contact.html">Contact</a>
      <a href="https://watcheratthethreshold.github.io/subtle-sprits-cruxfade/" class="cruxfade-link" title="Enter Cruxfade">‚üÅ Cruxfade</a>
    </div>
  </div>

  <div class="oracle-container">
    <div class="oracle-intro">
      <p>The Sigil Oracle speaks through symbol and intuition, offering guidance from the liminal spaces between knowing and unknowing.</p>
      <p>Ask your question with intention. The ritual of asking matters as much as the answer received.</p>
      <p>*The oracle is powered by feline wisdom and digital mysticism</p>
    </div>

    <div class="oracle-interface">
      <input type="text" id="questionInput" class="question-input" placeholder="What question weighs on your mind?..." />
      <button id="revealButton" class="reveal-button" onclick="drawSigil()">Consult the Oracle</button>
      
      <div class="sigil-display" id="sigilBox">
        <svg id="sigilImage" class="sigil" width="300" height="300" viewBox="0 0 300 300" fill="none" xmlns="http://www.w3.org/2000/svg">
          <!-- Default sigil will be replaced by random ones -->
        </svg>
        <p id="sigilPhrase" class="phrase"></p>
      </div>
    </div>
  </div>

  <div class="secret-whisper" id="secretWhisper">
    The oracle purrs with ancient knowledge...
  </div>

  <button class="back-to-top" id="scrollTop" title="Back to top">‚Üë</button>

  <footer>
    ¬© 2025 Sketchy Ponderings | In collaboration with <a href="../second-gaze/" style="text-decoration: none;">The Second Gaze</a> & <a href="../" style="text-decoration: none;">Fairweather</a> ‚Äî quietly relentless.
</footer>

<script>
  // Collection of mystical sigils as SVG data
  const sigilSVGs = [
    // Sigil 1: Cosmic Eye
    `<circle cx="150" cy="150" r="120" stroke="rgba(138, 43, 226, 0.6)" stroke-width="3" fill="none"/>
     <circle cx="150" cy="150" r="80" stroke="rgba(222, 184, 135, 0.8)" stroke-width="2" fill="rgba(222, 184, 135, 0.1)"/>
     <circle cx="150" cy="150" r="40" stroke="rgba(138, 43, 226, 0.8)" stroke-width="2" fill="rgba(138, 43, 226, 0.2)"/>
     <circle cx="150" cy="150" r="15" fill="rgba(138, 43, 226, 0.9)"/>
     <path d="M150 30 L150 70 M150 230 L150 270 M30 150 L70 150 M230 150 L270 150" stroke="rgba(222, 184, 135, 0.8)" stroke-width="3"/>`,
    
    // Sigil 2: Sacred Geometry
    `<polygon points="150,30 210,90 270,150 210,210 150,270 90,210 30,150 90,90" stroke="rgba(138, 43, 226, 0.7)" stroke-width="2" fill="rgba(138, 43, 226, 0.05)"/>
     <circle cx="150" cy="150" r="60" stroke="rgba(222, 184, 135, 0.8)" stroke-width="2" fill="none"/>
     <path d="M150 90 L180 120 L210 150 L180 180 L150 210 L120 180 L90 150 L120 120 Z" stroke="rgba(138, 43, 226, 0.8)" stroke-width="2" fill="rgba(138, 43, 226, 0.1)"/>
     <circle cx="150" cy="150" r="20" fill="rgba(222, 184, 135, 0.6)"/>`,
    
    // Sigil 3: Spiral Gateway
    `<path d="M150 20 Q280 20 280 150 Q280 280 150 280 Q20 280 20 150 Q20 70 100 70 Q180 70 180 150 Q180 200 150 200" stroke="rgba(138, 43, 226, 0.6)" stroke-width="3" fill="none"/>
     <circle cx="150" cy="150" r="80" stroke="rgba(222, 184, 135, 0.4)" stroke-width="1" fill="none"/>
     <circle cx="150" cy="150" r="25" stroke="rgba(138, 43, 226, 0.8)" stroke-width="2" fill="rgba(138, 43, 226, 0.2)"/>
     <circle cx="150" cy="150" r="8" fill="rgba(222, 184, 135, 0.9)"/>`,
    
    // Sigil 4: Crystalline Matrix
    `<path d="M150 30 L230 80 L270 160 L230 220 L150 270 L70 220 L30 160 L70 80 Z" stroke="rgba(138, 43, 226, 0.6)" stroke-width="2" fill="none"/>
     <path d="M150 60 L200 90 L230 140 L200 190 L150 220 L100 190 L70 140 L100 90 Z" stroke="rgba(222, 184, 135, 0.7)" stroke-width="2" fill="rgba(222, 184, 135, 0.1)"/>
     <circle cx="150" cy="150" r="30" stroke="rgba(138, 43, 226, 0.8)" stroke-width="2" fill="rgba(138, 43, 226, 0.15)"/>
     <path d="M150 30 L150 270 M70 80 L230 220 M230 80 L70 220" stroke="rgba(138, 43, 226, 0.4)" stroke-width="1"/>`,
    
    // Sigil 5: Lunar Phases
    `<circle cx="150" cy="150" r="100" stroke="rgba(138, 43, 226, 0.5)" stroke-width="2" fill="none"/>
     <circle cx="120" cy="150" r="25" fill="rgba(222, 184, 135, 0.3)"/>
     <circle cx="150" cy="150" r="25" fill="rgba(222, 184, 135, 0.6)"/>
     <circle cx="180" cy="150" r="25" fill="rgba(222, 184, 135, 0.9)"/>
     <path d="M150 50 Q190 90 150 150 Q110 210 150 250 Q190 210 150 150 Q110 90 150 50" stroke="rgba(138, 43, 226, 0.6)" stroke-width="1.5" fill="none"/>`,
    
    // Sigil 6: Elemental Cross
    `<circle cx="150" cy="150" r="120" stroke="rgba(138, 43, 226, 0.4)" stroke-width="1" fill="none"/>
     <path d="M150 30 L150 270 M30 150 L270 150" stroke="rgba(138, 43, 226, 0.7)" stroke-width="4"/>
     <circle cx="150" cy="150" r="40" stroke="rgba(222, 184, 135, 0.8)" stroke-width="3" fill="rgba(222, 184, 135, 0.1)"/>
     <circle cx="150" cy="70" r="15" fill="rgba(138, 43, 226, 0.6)"/>
     <circle cx="150" cy="230" r="15" fill="rgba(138, 43, 226, 0.6)"/>
     <circle cx="70" cy="150" r="15" fill="rgba(138, 43, 226, 0.6)"/>
     <circle cx="230" cy="150" r="15" fill="rgba(138, 43, 226, 0.6)"/>`,
    
    // Sigil 7: Infinity Weave
    `<path d="M50 150 Q100 100 150 150 Q200 200 250 150 Q200 100 150 150 Q100 200 50 150" stroke="rgba(138, 43, 226, 0.6)" stroke-width="3" fill="none"/>
     <circle cx="100" cy="125" r="20" stroke="rgba(222, 184, 135, 0.7)" stroke-width="2" fill="rgba(222, 184, 135, 0.1)"/>
     <circle cx="200" cy="175" r="20" stroke="rgba(222, 184, 135, 0.7)" stroke-width="2" fill="rgba(222, 184, 135, 0.1)"/>
     <circle cx="150" cy="150" r="10" fill="rgba(138, 43, 226, 0.8)"/>`,
    
    // Sigil 8: Tree of Life
    `<circle cx="150" cy="80" r="20" stroke="rgba(138, 43, 226, 0.6)" stroke-width="2" fill="rgba(138, 43, 226, 0.1)"/>
     <circle cx="120" cy="130" r="15" stroke="rgba(222, 184, 135, 0.7)" stroke-width="2" fill="rgba(222, 184, 135, 0.1)"/>
     <circle cx="180" cy="130" r="15" stroke="rgba(222, 184, 135, 0.7)" stroke-width="2" fill="rgba(222, 184, 135, 0.1)"/>
     <circle cx="150" cy="180" r="18" stroke="rgba(138, 43, 226, 0.7)" stroke-width="2" fill="rgba(138, 43, 226, 0.15)"/>
     <circle cx="150" cy="230" r="22" stroke="rgba(222, 184, 135, 0.8)" stroke-width="2" fill="rgba(222, 184, 135, 0.2)"/>
     <path d="M150 100 L120 115 M150 100 L180 115 M135 145 L150 165 M165 145 L150 165 M150 198 L150 208" stroke="rgba(138, 43, 226, 0.5)" stroke-width="2"/>`,
    
    // Sigil 9: Mandala Star
    `<circle cx="150" cy="150" r="100" stroke="rgba(138, 43, 226, 0.3)" stroke-width="1" fill="none"/>
     <path d="M150 50 L170 110 L230 110 L185 150 L205 210 L150 175 L95 210 L115 150 L70 110 L130 110 Z" stroke="rgba(138, 43, 226, 0.6)" stroke-width="2" fill="rgba(138, 43, 226, 0.1)"/>
     <circle cx="150" cy="150" r="35" stroke="rgba(222, 184, 135, 0.8)" stroke-width="2" fill="rgba(222, 184, 135, 0.15)"/>
     <circle cx="150" cy="150" r="12" fill="rgba(138, 43, 226, 0.8)"/>`,
    
    // Sigil 10: Quantum Field
    `<circle cx="150" cy="150" r="80" stroke="rgba(138, 43, 226, 0.4)" stroke-width="1" fill="none"/>
     <circle cx="150" cy="150" r="5" fill="rgba(222, 184, 135, 0.9)"/>
     <circle cx="130" cy="120" r="3" fill="rgba(138, 43, 226, 0.7)"/>
     <circle cx="170" cy="180" r="3" fill="rgba(138, 43, 226, 0.7)"/>
     <circle cx="180" cy="120" r="4" fill="rgba(222, 184, 135, 0.6)"/>
     <circle cx="120" cy="180" r="4" fill="rgba(222, 184, 135, 0.6)"/>
     <circle cx="150" cy="100" r="2" fill="rgba(138, 43, 226, 0.5)"/>
     <circle cx="150" cy="200" r="2" fill="rgba(138, 43, 226, 0.5)"/>
     <circle cx="100" cy="150" r="2" fill="rgba(138, 43, 226, 0.5)"/>
     <circle cx="200" cy="150" r="2" fill="rgba(138, 43, 226, 0.5)"/>
     <path d="M150 150 Q130 120 150 100 Q170 120 180 120 Q180 140 200 150 Q180 160 180 180 Q160 180 150 200 Q140 180 120 180 Q120 160 100 150 Q120 140 120 120 Q140 120 150 150" stroke="rgba(138, 43, 226, 0.3)" stroke-width="1" fill="none"/>`,
  ];

  function getRandomSigil() {
    const randomIndex = Math.floor(Math.random() * sigilSVGs.length);
    return sigilSVGs[randomIndex];
  }

  async function drawSigil() {
    const sigilElement = document.getElementById('sigilImage');
    const phrase = document.getElementById('sigilPhrase');
    const input = document.getElementById('questionInput');
    const button = document.getElementById('revealButton');
    const secretWhisper = document.getElementById('secretWhisper');
    const question = input.value.trim() || "No question";

    // Show secret whisper occasionally
    if (Math.random() < 0.3) {
      secretWhisper.classList.add('show');
      setTimeout(() => {
        secretWhisper.classList.remove('show');
      }, 3000);
    }

    // Loading state with immediate random sigil
    sigilElement.innerHTML = getRandomSigil(); // Show random sigil immediately
    sigilElement.classList.add('visible');
    
    // Mystical loading messages that cycle every few seconds
    const loadingMessages = [
      'The oracle stirs... listening to the whispers between worlds...',
      'Ancient servers awakening from digital slumber...',
      'The feline wisdom council convenes in cyberspace...',
      'Translating cosmic signals through silicon pathways...',
      'The digital familiar stretches and prepares to speak...',
      'Patience... the mystical algorithms require time to unfold...',
      'The server purrs to life in distant data centers...'
    ];
    
    let messageIndex = 0;
    phrase.textContent = loadingMessages[0];
    phrase.classList.add('visible', 'loading');
    input.disabled = true;
    button.disabled = true;
    input.classList.add('pulse-glow');

    // Cycle through loading messages every 4 seconds
    const messageInterval = setInterval(() => {
      messageIndex = (messageIndex + 1) % loadingMessages.length;
      phrase.textContent = loadingMessages[messageIndex];
      // Change sigil every message cycle for extra mysticism
      sigilElement.innerHTML = getRandomSigil();
    }, 4000);

    try {
      // Set a generous timeout for the server spin-up
      const controller = new AbortController();
      const timeoutId = setTimeout(() => controller.abort(), 60000); // 60 second timeout
      
      const response = await fetch('https://sigil-oracle-server.onrender.com/oracle', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ question }),
        signal: controller.signal
      });
      
      clearTimeout(timeoutId);
      clearInterval(messageInterval);

      const data = await response.json();
      
      // Remove loading animation and show final response
      phrase.classList.remove('loading');
      phrase.textContent = data.response || 'The veil shimmers but reveals nothing today. Perhaps the question seeks a different moment.';

      // Show final sigil
      sigilElement.innerHTML = getRandomSigil();
    } catch (err) {
      clearInterval(messageInterval);
      phrase.classList.remove('loading');
      
      if (err.name === 'AbortError') {
        phrase.textContent = 'The oracle has retreated deep into meditation. The wisdom you seek requires more time to manifest. Try again in a moment...';
      } else {
        phrase.textContent = '‚ö†Ô∏è The digital veil has fallen. The oracle retreats to its ethereal realm.';
      }
      
      // Show a contemplative sigil for errors
      sigilElement.innerHTML = getRandomSigil();
    }

    // Reset after 16 seconds
    setTimeout(() => {
      sigilElement.classList.remove('visible');
      phrase.classList.remove('visible');
      input.value = '';
      input.placeholder = "What question weighs on your mind?...";
      input.disabled = false;
      button.disabled = false;
      input.classList.remove('pulse-glow');
    }, 16000);
  }

  // Enable "Enter" key to trigger drawSigil
  document.getElementById('questionInput').addEventListener('keydown', function(event) {
    if (event.key === 'Enter') {
      event.preventDefault();
      drawSigil();
    }
  });

  // Mobile menu functionality
  const mobileMenuButton = document.getElementById('mobileMenuButton');
  const navLinks = document.getElementById('navLinks');

  mobileMenuButton.addEventListener('click', () => {
    navLinks.classList.toggle('open');
    
    // Update button text and icon
    if (navLinks.classList.contains('open')) {
      mobileMenuButton.textContent = '‚úï Close';
    } else {
      mobileMenuButton.textContent = '‚ò∞ Menu';
    }
  });

  // Close mobile menu when clicking on a link
  navLinks.addEventListener('click', (e) => {
    if (e.target.tagName === 'A') {
      navLinks.classList.remove('open');
      mobileMenuButton.textContent = '‚ò∞ Menu';
    }
  });

  // Close mobile menu when clicking outside
  document.addEventListener('click', (e) => {
    if (!e.target.closest('.nav')) {
      navLinks.classList.remove('open');
      mobileMenuButton.textContent = '‚ò∞ Menu';
    }
  });

  // Back to top functionality
  const topButton = document.getElementById('scrollTop');
  window.addEventListener('scroll', () => {
    if (window.scrollY > 300) {
      topButton.classList.add('show');
    } else {
      topButton.classList.remove('show');
    }
  });

  topButton.addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  // Parallax effect for mist
  window.addEventListener('scroll', () => {
    const scrolled = window.pageYOffset;
    const rate = scrolled * -0.3;
    document.querySelector('.mist-overlay').style.transform = `translateY(${rate}px)`;
  });

  // Easter egg: Show secret whisper on multiple clicks
  let clickCount = 0;
  document.addEventListener('click', () => {
    clickCount++;
    if (clickCount >= 7) {
      document.getElementById('secretWhisper').textContent = 'üê± mrow? The feline oracle acknowledges your persistence...';
      document.getElementById('secretWhisper').classList.add('show');
      setTimeout(() => {
        document.getElementById('secretWhisper').classList.remove('show');
        clickCount = 0;
      }, 4000);
    }
  });
</script>

</body>
</html>
